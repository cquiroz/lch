language: java

scala:
 - 2.11.8

 jdk:
  - openjdk8

addons:
  - postgresql: "9.6"
  
env:
  global:
    - secure: "RdZfbzf5Oja9oVLCvl7Ej+j9DpRPM4OFZ3pP+TYPqQ1DVfrhA2W2AjpYt8QVXeagVCFbJu48Og/sImkoQnkgh8+/7IGPnX29weEFsHZhf8FA1E7Gf1o1HU5YhJuCOsNOR9xG+1tRHR/+gKOwP1VyGugUhrSwNOuYGOr6yQ1JYfU="
    - secure: "ezhPWkY6EjHsQnqRSEghdsmkzbeB4tBiekfNTH+5E6TmO9qiplasJELa8Bqvpmnl7nCjFFn1BrFBsdxCRyApIiPxxV8KAE3w1whmNGsYdYvNFJo9xqs0BG5CEDIqnT78LstSJVFFKwytLB8Fus1dN17LbV/80+iIx1iJkoSVc7k="

before_script:
  - if [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    svn --username $SVN_USERNAME --password $SVN_PASSWORD --non-interactive co http://source.gemini.edu/software/lch-credentials $TRAVIS_BUILD_DIR/lch-credentials;
    ls $TRAVIS_BUILD_DIR;
    bash $TRAVIS_BUILD_DIR/lch-credentials/trunk/link.sh -v $TRAVIS_BUILD_DIR;
    fi

  - psql -c "create user lch"; -U postgres
  - psql -c "create database lch_test;" -U postgres
  - psql -c "grant all privileges on database lch_test to lch;" -U postgres
  - psql -c "create database lch_dev;" -U postgres
  - psql -c "grant all privileges on database lch_dev to lch;" -U postgres

script:
  - mvn -U clean install -B
#  - mvn test -U -B --projects web,pam-parser
